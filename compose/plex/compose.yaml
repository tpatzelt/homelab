services:
  plex:
    # Plex Media Server - streams media to clients
    container_name: plex
    image: plexinc/pms-docker:1.42.2.10156-f737b826c
    env_file: ./.env
    restart: unless-stopped
    environment:
      - PLEX_UID=${PUID}
      - PLEX_GID=${PGID}
    # Optional ports for local discovery and DLNA (uncomment if not using reverse proxy only)
    # ports:
    #   - 8324:8324/tcp     # Roku companion
    #   - 32469:32469/tcp   # DLNA server
    #   - 1900:1900/udp     # DLNA/SSDP discovery
    #   - 32410:32410/udp   # GDM network discovery
    #   - 32412:32412/udp   # GDM network discovery
    #   - 32413:32413/udp   # GDM network discovery
    #   - 32414:32414/udp   # GDM network discovery
    hostname: lindus  # Server hostname shown in Plex UI
    volumes:
      - /opt/dockerdata/plex/config:/config
      - /opt/dockerdata/plex/transcode:/transcode
      - /mnt/storage/plexmedia:/data
      - /mnt/storage/data/Media/musik/:/external_data/music
    networks:
      - caddy_network

networks:
  caddy_network:
    external: true
    name: caddy_network
